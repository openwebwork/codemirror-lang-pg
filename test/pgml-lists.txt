# enumerated lists

BEGIN_PGML
1. This is the first item.
2. This is the second item.

a) This is the first item.
b) This is the second item.

A) This is the first item.
A) This is the second item.

i. This is the first item.
i. This is the second item.

I) This is the first item.
II) This is the second item.
END_PGML

==>

{
    "name": "Program",
    "from": 0,
    "to": 299,
    "children": [
        {
            "name": "PGMLBlock",
            "from": 0,
            "to": 299,
            "children": [
                { "name": "BeginPG", "from": 0, "to": 10 },
                {
                    "name": "PGMLContent",
                    "from": 10,
                    "to": 291,
                    "children": [
                        {
                            "name": "OrderedList",
                            "from": 11,
                            "to": 65,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 11,
                                    "to": 38,
                                    "children": [
                                        { "name": "ListMark", "from": 11, "to": 14 },
                                        { "name": "Paragraph", "from": 14, "to": 38 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 38,
                                    "to": 65,
                                    "children": [
                                        { "name": "ListMark", "from": 38, "to": 41 },
                                        { "name": "Paragraph", "from": 41, "to": 65 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 67,
                            "to": 121,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 67,
                                    "to": 94,
                                    "children": [
                                        { "name": "ListMark", "from": 67, "to": 70 },
                                        { "name": "Paragraph", "from": 70, "to": 94 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 94,
                                    "to": 121,
                                    "children": [
                                        { "name": "ListMark", "from": 94, "to": 97 },
                                        { "name": "Paragraph", "from": 97, "to": 121 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 123,
                            "to": 177,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 123,
                                    "to": 150,
                                    "children": [
                                        { "name": "ListMark", "from": 123, "to": 126 },
                                        { "name": "Paragraph", "from": 126, "to": 150 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 150,
                                    "to": 177,
                                    "children": [
                                        { "name": "ListMark", "from": 150, "to": 153 },
                                        { "name": "Paragraph", "from": 153, "to": 177 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 179,
                            "to": 233,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 179,
                                    "to": 206,
                                    "children": [
                                        { "name": "ListMark", "from": 179, "to": 182 },
                                        { "name": "Paragraph", "from": 182, "to": 206 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 206,
                                    "to": 233,
                                    "children": [
                                        { "name": "ListMark", "from": 206, "to": 209 },
                                        { "name": "Paragraph", "from": 209, "to": 233 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 235,
                            "to": 291,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 235,
                                    "to": 262,
                                    "children": [
                                        { "name": "ListMark", "from": 235, "to": 238 },
                                        { "name": "Paragraph", "from": 238, "to": 262 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 262,
                                    "to": 291,
                                    "children": [
                                        { "name": "ListMark", "from": 262, "to": 266 },
                                        { "name": "Paragraph", "from": 266, "to": 291 }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                { "name": "EndPG", "from": 291, "to": 299 }
            ]
        }
    ]
}

==>

from: '0'
parseAll: 'true'
to: '280'
type: 'root'
stack: [
  [ # 0
    bullet: 'numeric'
    combine: { list: 'bullet', par: 'true' }
    from: '0'
    to: '54'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '0'
        to: '27'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '3'
            to: '27'
            type: 'text'
            stack: ['This is the first item.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '27'
        to: '54'
        token: '2. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '30'
            to: '54'
            type: 'text'
            stack: ['This is the second item.']
          ]
        ]
      ]
    ]
  ]
  [ # 1
    from: '54'
    noIndent: '1'
    to: '56'
    token: '\n\n'
    type: 'par'
  ]
  [ # 2
    bullet: 'alpha'
    combine: { list: 'bullet', par: 'true' }
    from: '56'
    to: '110'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '56'
        to: '83'
        token: 'a) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '59'
            to: '83'
            type: 'text'
            stack: ['This is the first item.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '83'
        to: '110'
        token: 'b) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '86'
            to: '110'
            type: 'text'
            stack: ['This is the second item.']
          ]
        ]
      ]
    ]
  ]
  [ # 3
    from: '110'
    noIndent: '1'
    to: '112'
    token: '\n\n'
    type: 'par'
  ]
  [ # 4
    bullet: 'Alpha'
    combine: { list: 'bullet', par: 'true' }
    from: '112'
    to: '166'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '112'
        to: '139'
        token: 'A) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '115'
            to: '139'
            type: 'text'
            stack: ['This is the first item.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '139'
        to: '166'
        token: 'A) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '142'
            to: '166'
            type: 'text'
            stack: ['This is the second item.']
          ]
        ]
      ]
    ]
  ]
  [ # 5
    from: '166'
    noIndent: '1'
    to: '168'
    token: '\n\n'
    type: 'par'
  ]
  [ # 6
    bullet: 'roman'
    combine: { list: 'bullet', par: 'true' }
    from: '168'
    to: '222'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '168'
        to: '195'
        token: 'i. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '171'
            to: '195'
            type: 'text'
            stack: ['This is the first item.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '195'
        to: '222'
        token: 'i. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '198'
            to: '222'
            type: 'text'
            stack: ['This is the second item.']
          ]
        ]
      ]
    ]
  ]
  [ # 7
    from: '222'
    noIndent: '1'
    to: '224'
    token: '\n\n'
    type: 'par'
  ]
  [ # 8
    bullet: 'Roman'
    combine: { list: 'bullet', par: 'true' }
    from: '224'
    to: '280'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '224'
        to: '251'
        token: 'I) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '227'
            to: '251'
            type: 'text'
            stack: ['This is the first item.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '251'
        to: '280'
        token: 'II) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '255'
            to: '280'
            type: 'text'
            stack: ['This is the second item.', '\n']
          ]
        ]
      ]
    ]
  ]
]

# bullet lists

BEGIN_PGML
* Apple
* Banana

+ Apple
+ Banana

o Apple
o Banana

- Apple
- Banana
END_PGML

==>

{
    "name": "Program",
    "from": 0,
    "to": 90,
    "children": [
        {
            "name": "PGMLBlock",
            "from": 0,
            "to": 90,
            "children": [
                { "name": "BeginPG", "from": 0, "to": 10 },
                {
                    "name": "PGMLContent",
                    "from": 10,
                    "to": 82,
                    "children": [
                        {
                            "name": "BulletList",
                            "from": 11,
                            "to": 27,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 11,
                                    "to": 19,
                                    "children": [
                                        { "name": "ListMark", "from": 11, "to": 13 },
                                        { "name": "Paragraph", "from": 13, "to": 19 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 19,
                                    "to": 27,
                                    "children": [
                                        { "name": "ListMark", "from": 19, "to": 21 },
                                        { "name": "Paragraph", "from": 21, "to": 27 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "BulletList",
                            "from": 29,
                            "to": 45,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 29,
                                    "to": 37,
                                    "children": [
                                        { "name": "ListMark", "from": 29, "to": 31 },
                                        { "name": "Paragraph", "from": 31, "to": 37 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 37,
                                    "to": 45,
                                    "children": [
                                        { "name": "ListMark", "from": 37, "to": 39 },
                                        { "name": "Paragraph", "from": 39, "to": 45 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "BulletList",
                            "from": 47,
                            "to": 63,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 47,
                                    "to": 55,
                                    "children": [
                                        { "name": "ListMark", "from": 47, "to": 49 },
                                        { "name": "Paragraph", "from": 49, "to": 55 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 55,
                                    "to": 63,
                                    "children": [
                                        { "name": "ListMark", "from": 55, "to": 57 },
                                        { "name": "Paragraph", "from": 57, "to": 63 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "BulletList",
                            "from": 65,
                            "to": 82,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 65,
                                    "to": 73,
                                    "children": [
                                        { "name": "ListMark", "from": 65, "to": 67 },
                                        { "name": "Paragraph", "from": 67, "to": 73 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 73,
                                    "to": 82,
                                    "children": [
                                        { "name": "ListMark", "from": 73, "to": 75 },
                                        { "name": "Paragraph", "from": 75, "to": 82 }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                { "name": "EndPG", "from": 82, "to": 90 }
            ]
        }
    ]
}

==>

from: '0'
parseAll: 'true'
to: '71'
type: 'root'
stack: [
  [ # 0
    bullet: 'disc'
    combine: { list: 'bullet', par: 'true' }
    from: '0'
    to: '16'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '0'
        to: '8'
        token: '* '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '2'
            to: '8'
            type: 'text'
            stack: ['Apple', '\n']
          ]
        ]
      ]
      [ # 1
        from: '8'
        to: '16'
        token: '* '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '10'
            to: '16'
            type: 'text'
            stack: ['Banana']
          ]
        ]
      ]
    ]
  ]
  [ # 1
    from: '16'
    noIndent: '1'
    to: '18'
    token: '\n\n'
    type: 'par'
  ]
  [ # 2
    bullet: 'square'
    combine: { list: 'bullet', par: 'true' }
    from: '18'
    to: '34'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '18'
        to: '26'
        token: '+ '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '20'
            to: '26'
            type: 'text'
            stack: ['Apple', '\n']
          ]
        ]
      ]
      [ # 1
        from: '26'
        to: '34'
        token: '+ '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '28'
            to: '34'
            type: 'text'
            stack: ['Banana']
          ]
        ]
      ]
    ]
  ]
  [ # 3
    from: '34'
    noIndent: '1'
    to: '36'
    token: '\n\n'
    type: 'par'
  ]
  [ # 4
    bullet: 'circle'
    combine: { list: 'bullet', par: 'true' }
    from: '36'
    to: '52'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '36'
        to: '44'
        token: 'o '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '38'
            to: '44'
            type: 'text'
            stack: ['Apple', '\n']
          ]
        ]
      ]
      [ # 1
        from: '44'
        to: '52'
        token: 'o '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '46'
            to: '52'
            type: 'text'
            stack: ['Banana']
          ]
        ]
      ]
    ]
  ]
  [ # 5
    from: '52'
    noIndent: '1'
    to: '54'
    token: '\n\n'
    type: 'par'
  ]
  [ # 6
    bullet: 'bullet'
    combine: { list: 'bullet', par: 'true' }
    from: '54'
    to: '71'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '54'
        to: '62'
        token: '- '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '56'
            to: '62'
            type: 'text'
            stack: ['Apple', '\n']
          ]
        ]
      ]
      [ # 1
        from: '62'
        to: '71'
        token: '- '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '64'
            to: '71'
            type: 'text'
            stack: ['Banana', '\n']
          ]
        ]
      ]
    ]
  ]
]

# nested lists

BEGIN_PGML
1. A list
    a. with a sublist
    a. of three items
        i. deep
        i. nesting
    a. (indent sublist items with four spaces)
2. Back to the main list
    * it works with
    * bullets too
END_PGML

==>

{
    "name": "Program",
    "from": 0,
    "to": 218,
    "children": [
        {
            "name": "PGMLBlock",
            "from": 0,
            "to": 218,
            "children": [
                { "name": "BeginPG", "from": 0, "to": 10 },
                {
                    "name": "PGMLContent",
                    "from": 10,
                    "to": 210,
                    "children": [
                        {
                            "name": "OrderedList",
                            "from": 11,
                            "to": 176,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 11,
                                    "to": 147,
                                    "children": [
                                        { "name": "ListMark", "from": 11, "to": 14 },
                                        {
                                            "name": "Paragraph",
                                            "from": 14,
                                            "to": 147,
                                            "children": [
                                                {
                                                    "name": "OrderedList",
                                                    "from": 25,
                                                    "to": 147,
                                                    "children": [
                                                        {
                                                            "name": "ListItem",
                                                            "from": 25,
                                                            "to": 47,
                                                            "children": [
                                                                { "name": "ListMark", "from": 25, "to": 28 },
                                                                { "name": "Paragraph", "from": 28, "to": 47 }
                                                            ]
                                                        },
                                                        {
                                                            "name": "ListItem",
                                                            "from": 47,
                                                            "to": 104,
                                                            "children": [
                                                                { "name": "ListMark", "from": 47, "to": 50 },
                                                                {
                                                                    "name": "Paragraph",
                                                                    "from": 50,
                                                                    "to": 104,
                                                                    "children": [
                                                                        {
                                                                            "name": "OrderedList",
                                                                            "from": 73,
                                                                            "to": 104,
                                                                            "children": [
                                                                                {
                                                                                    "name": "ListItem",
                                                                                    "from": 73,
                                                                                    "to": 89,
                                                                                    "children": [
                                                                                        { "name": "ListMark", "from": 73, "to": 76 },
                                                                                        { "name": "Paragraph", "from": 76, "to": 89 }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "ListItem",
                                                                                    "from": 89,
                                                                                    "to": 104,
                                                                                    "children": [
                                                                                        { "name": "ListMark", "from": 89, "to": 92 },
                                                                                        { "name": "Paragraph", "from": 92, "to": 104 }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "ListItem",
                                                            "from": 104,
                                                            "to": 147,
                                                            "children": [
                                                                { "name": "ListMark", "from": 104, "to": 107 },
                                                                { "name": "Paragraph", "from": 107, "to": 147 }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 147,
                                    "to": 210,
                                    "children": [
                                        { "name": "ListMark", "from": 147, "to": 150 },
                                        {
                                            "name": "Paragraph",
                                            "from": 150,
                                            "to": 210,
                                            "children": [
                                                {
                                                    "name": "BulletList",
                                                    "from": 176,
                                                    "to": 210,
                                                    "children": [
                                                        {
                                                            "name": "ListItem",
                                                            "from": 176,
                                                            "to": 196,
                                                            "children": [
                                                                { "name": "ListMark", "from": 176, "to": 178 },
                                                                { "name": "Paragraph", "from": 178, "to": 196 }
                                                            ]
                                                        },
                                                        {
                                                            "name": "ListItem",
                                                            "from": 196,
                                                            "to": 210,
                                                            "children": [
                                                                { "name": "ListMark", "from": 196, "to": 198 },
                                                                { "name": "Paragraph", "from": 198, "to": 210 }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                { "name": "EndPG", "from": 210, "to": 218 }
            ]
        }
    ]
}

==>

from: '0'
parseAll: 'true'
to: '199'
type: 'root'
stack: [
  [ # 0
    bullet: 'numeric'
    combine: { list: 'bullet', par: 'true' }
    from: '0'
    to: '165'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '0'
        to: '136'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '3'
            to: '14'
            type: 'text'
            stack: ['A list', '\n']
          ]
          [ # 1
            bullet: 'alpha'
            combine: { list: 'bullet', par: 'true' }
            from: '14'
            to: '136'
            token: ''
            type: 'list'
            stack: [
              [ # 0
                from: '14'
                to: '36'
                token: 'a. '
                type: 'bullet'
                stack: [
                  [ # 0
                    combine: { text: 'type' }
                    from: '17'
                    to: '36'
                    type: 'text'
                    stack: ['with a sublist', '\n']
                  ]
                ]
              ]
              [ # 1
                from: '36'
                to: '93'
                token: 'a. '
                type: 'bullet'
                stack: [
                  [ # 0
                    combine: { text: 'type' }
                    from: '39'
                    to: '62'
                    type: 'text'
                    stack: ['of three items', '\n']
                  ]
                  [ # 1
                    bullet: 'roman'
                    combine: { list: 'bullet', par: 'true' }
                    from: '62'
                    to: '93'
                    token: ''
                    type: 'list'
                    stack: [
                      [ # 0
                        from: '62'
                        to: '78'
                        token: 'i. '
                        type: 'bullet'
                        stack: [
                          [ # 0
                            combine: { text: 'type' }
                            from: '65'
                            to: '78'
                            type: 'text'
                            stack: ['deep', '\n']
                          ]
                        ]
                      ]
                      [ # 1
                        from: '78'
                        to: '93'
                        token: 'i. '
                        type: 'bullet'
                        stack: [
                          [ # 0
                            combine: { text: 'type' }
                            from: '81'
                            to: '93'
                            type: 'text'
                            stack: ['nesting', '\n']
                          ]
                        ]
                      ]
                    ]
                  ]
                ]
              ]
              [ # 2
                from: '93'
                to: '136'
                token: 'a. '
                type: 'bullet'
                stack: [
                  [ # 0
                    combine: { text: 'type' }
                    from: '96'
                    to: '136'
                    type: 'text'
                    stack: ['(', 'indent sublist items with four spaces', ')', '\n']
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
      [ # 1
        from: '136'
        to: '199'
        token: '2. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '139'
            to: '165'
            type: 'text'
            stack: ['Back to the main list', '\n']
          ]
          [ # 1
            bullet: 'disc'
            combine: { list: 'bullet', par: 'true' }
            from: '165'
            to: '199'
            token: ''
            type: 'list'
            stack: [
              [ # 0
                from: '165'
                to: '185'
                token: '* '
                type: 'bullet'
                stack: [
                  [ # 0
                    combine: { text: 'type' }
                    from: '167'
                    to: '185'
                    type: 'text'
                    stack: ['it works with', '\n']
                  ]
                ]
              ]
              [ # 1
                from: '185'
                to: '199'
                token: '* '
                type: 'bullet'
                stack: [
                  [ # 0
                    combine: { text: 'type' }
                    from: '187'
                    to: '199'
                    type: 'text'
                    stack: ['bullets too', '\n']
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
    ]
  ]
]

# list continuation

BEGIN_PGML
1. A list item can continue
onto a new line of markup,
    even with indentation,
1. but it's still the same line of output.

A new paragraph ends the enumeration...
1. And if another item comes, it starts a new list.
1. However if you indent that next paragraph,

    then it is part of the previous list item
1. and the next item continues the enumeration.
1. If you end a line with three spaces as this line   
1. that ends the enumeration so any more items start over
END_PGML

==>

{
    "name": "Program",
    "from": 0,
    "to": 491,
    "children": [
        {
            "name": "PGMLBlock",
            "from": 0,
            "to": 491,
            "children": [
                { "name": "BeginPG", "from": 0, "to": 10 },
                {
                    "name": "PGMLContent",
                    "from": 10,
                    "to": 483,
                    "children": [
                        {
                            "name": "OrderedList",
                            "from": 11,
                            "to": 135,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 11,
                                    "to": 93,
                                    "children": [
                                        { "name": "ListMark", "from": 11, "to": 14 },
                                        { "name": "Paragraph", "from": 14, "to": 93 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 93,
                                    "to": 135,
                                    "children": [
                                        { "name": "ListMark", "from": 93, "to": 96 },
                                        { "name": "Paragraph", "from": 96, "to": 135 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 177,
                            "to": 421,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 177,
                                    "to": 229,
                                    "children": [
                                        { "name": "ListMark", "from": 177, "to": 180 },
                                        { "name": "Paragraph", "from": 180, "to": 229 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 229,
                                    "to": 322,
                                    "children": [
                                        { "name": "ListMark", "from": 229, "to": 232 },
                                        { "name": "Paragraph", "from": 232, "to": 322 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 322,
                                    "to": 370,
                                    "children": [
                                        { "name": "ListMark", "from": 322, "to": 325 },
                                        { "name": "Paragraph", "from": 325, "to": 370 }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 370,
                                    "to": 421,
                                    "children": [
                                        { "name": "ListMark", "from": 370, "to": 373 },
                                        { "name": "Paragraph", "from": 373, "to": 421 }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "OrderedList",
                            "from": 425,
                            "to": 483,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 425,
                                    "to": 483,
                                    "children": [
                                        { "name": "ListMark", "from": 425, "to": 428 },
                                        { "name": "Paragraph", "from": 428, "to": 483 }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                { "name": "EndPG", "from": 483, "to": 491 }
            ]
        }
    ]
}

==>

from: '0'
parseAll: 'true'
to: '472'
type: 'root'
stack: [
  [ # 0
    bullet: 'numeric'
    combine: { list: 'bullet', par: 'true' }
    from: '0'
    to: '124'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '0'
        to: '82'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '3'
            to: '82'
            type: 'text'
            stack: ['A list item can continue', '\n', 'onto a new line of markup,', '\n', 'even with indentation,', '\n']
          ]
        ]
      ]
      [ # 1
        from: '82'
        to: '124'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '85'
            to: '91'
            type: 'text'
            stack: ['but it']
          ]
          [ # 1
            from: '91'
            to: '92'
            token: '''
            type: 'quote'
          ]
          [ # 2
            combine: { text: 'type' }
            from: '92'
            to: '124'
            type: 'text'
            stack: ['s still the same line of output.']
          ]
        ]
      ]
    ]
  ]
  [ # 1
    from: '124'
    noIndent: '1'
    to: '126'
    token: '\n\n'
    type: 'par'
  ]
  [ # 2
    combine: { indent: 'indent', list: { indent: '1' }, par: 'true' }
    from: '126'
    indent: '0'
    to: '166'
    type: 'indent'
    stack: [
      [ # 0
        combine: { text: 'type' }
        from: '126'
        to: '166'
        type: 'text'
        stack: ['A new paragraph ends the enumeration...', '\n']
      ]
    ]
  ]
  [ # 3
    bullet: 'numeric'
    combine: { list: 'bullet', par: 'true' }
    from: '166'
    to: '410'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '166'
        to: '218'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '169'
            to: '218'
            type: 'text'
            stack: ['And if another item comes, it starts a new list.', '\n']
          ]
        ]
      ]
      [ # 1
        from: '218'
        to: '311'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '221'
            to: '263'
            type: 'text'
            stack: ['However if you indent that next paragraph,']
          ]
          [ # 1
            from: '263'
            noIndent: '1'
            to: '265'
            token: '\n\n'
            type: 'par'
          ]
          [ # 2
            combine: { text: 'type' }
            from: '269'
            to: '311'
            type: 'text'
            stack: ['then it is part of the previous list item', '\n']
          ]
        ]
      ]
      [ # 2
        from: '311'
        to: '359'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '314'
            to: '359'
            type: 'text'
            stack: ['and the next item continues the enumeration.', '\n']
          ]
        ]
      ]
      [ # 3
        from: '359'
        to: '410'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '362'
            to: '410'
            type: 'text'
            stack: ['If you end a line with three spaces as this line']
          ]
        ]
      ]
    ]
  ]
  [ # 4
    from: '410'
    noIndent: '1'
    to: '413'
    token: '   '
    type: 'forced'
  ]
  [ # 5
    bullet: 'numeric'
    combine: { list: 'bullet', par: 'true' }
    from: '414'
    to: '472'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '414'
        to: '472'
        token: '1. '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '417'
            to: '472'
            type: 'text'
            stack: ['that ends the enumeration so any more items start over', '\n']
          ]
        ]
      ]
    ]
  ]
]

# enumerated list with indentation

BEGIN_PGML
a) An item. Followed by a new line and an indented block.

    Followed by an answer block causes the incorrect highlighting.

    [_]{1}

b) If the indention is after a new line, it
    misses the first few characters.

    [_]{2}
END_PGML

==>

{
    "name": "Program",
    "from": 0,
    "to": 251,
    "children": [
        {
            "name": "PGMLBlock",
            "from": 0,
            "to": 251,
            "children": [
                { "name": "BeginPG", "from": 0, "to": 10 },
                {
                    "name": "PGMLContent",
                    "from": 10,
                    "to": 243,
                    "children": [
                        {
                            "name": "OrderedList",
                            "from": 11,
                            "to": 198,
                            "children": [
                                {
                                    "name": "ListItem",
                                    "from": 11,
                                    "to": 148,
                                    "children": [
                                        { "name": "ListMark", "from": 11, "to": 14 },
                                        {
                                            "name": "Paragraph",
                                            "from": 14,
                                            "to": 148,
                                            "children": [
                                                { "name": "AnswerRule", "from": 142, "to": 145 },
                                                {
                                                    "name": "Option",
                                                    "from": 145,
                                                    "to": 148,
                                                    "children": [
                                                        { "name": "OptionMark", "from": 145, "to": 146 },
                                                        {
                                                            "name": "Program",
                                                            "from": 146,
                                                            "to": 147,
                                                            "children": [
                                                                {
                                                                    "name": "ExpressionStatement",
                                                                    "from": 146,
                                                                    "to": 147,
                                                                    "children": [
                                                                        { "name": "Integer", "from": 146, "to": 147 }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        { "name": "OptionMark", "from": 147, "to": 148 }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "ListItem",
                                    "from": 150,
                                    "to": 243,
                                    "children": [
                                        { "name": "ListMark", "from": 150, "to": 153 },
                                        {
                                            "name": "Paragraph",
                                            "from": 153,
                                            "to": 243,
                                            "children": [
                                                { "name": "AnswerRule", "from": 236, "to": 239 },
                                                {
                                                    "name": "Option",
                                                    "from": 239,
                                                    "to": 242,
                                                    "children": [
                                                        { "name": "OptionMark", "from": 239, "to": 240 },
                                                        {
                                                            "name": "Program",
                                                            "from": 240,
                                                            "to": 241,
                                                            "children": [
                                                                {
                                                                    "name": "ExpressionStatement",
                                                                    "from": 240,
                                                                    "to": 241,
                                                                    "children": [
                                                                        { "name": "Integer", "from": 240, "to": 241 }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        { "name": "OptionMark", "from": 241, "to": 242 }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                { "name": "EndPG", "from": 243, "to": 251 }
            ]
        }
    ]
}

==>

from: '0'
parseAll: 'true'
to: '232'
type: 'root'
stack: [
  [ # 0
    bullet: 'alpha'
    combine: { list: 'bullet', par: 'true' }
    from: '0'
    to: '187'
    token: ''
    type: 'list'
    stack: [
      [ # 0
        from: '0'
        to: '137'
        token: 'a) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '3'
            to: '57'
            type: 'text'
            stack: ['An item. Followed by a new line and an indented block.']
          ]
          [ # 1
            from: '57'
            noIndent: '1'
            to: '59'
            token: '\n\n'
            type: 'par'
          ]
          [ # 2
            combine: { text: 'type' }
            from: '63'
            to: '125'
            type: 'text'
            stack: ['Followed by an answer block causes the incorrect highlighting.']
          ]
          [ # 3
            from: '125'
            noIndent: '1'
            to: '127'
            token: '\n\n'
            type: 'par'
          ]
          [ # 4
            from: '131'
            optionStack: [
              {
                from: '134'
                terminator: '}'
                text: '1'
                textFrom: '135'
                to: '137'
                token: '{'
                type: 'options'
              }
            ]
            options: ['answer', 'width', 'name', 'cmp_options']
            to: '137'
            token: '[_]'
            type: 'answer'
          ]
        ]
      ]
      [ # 1
        from: '137'
        noIndent: '1'
        to: '139'
        token: '\n\n'
        type: 'par'
      ]
      [ # 2
        from: '139'
        to: '232'
        token: 'b) '
        type: 'bullet'
        stack: [
          [ # 0
            combine: { text: 'type' }
            from: '142'
            to: '219'
            type: 'text'
            stack: ['If the indention is after a new line, it', '\n', 'misses the first few characters.']
          ]
          [ # 1
            from: '219'
            noIndent: '1'
            to: '221'
            token: '\n\n'
            type: 'par'
          ]
          [ # 2
            from: '225'
            optionStack: [
              {
                from: '228'
                terminator: '}'
                text: '2'
                textFrom: '229'
                to: '231'
                token: '{'
                type: 'options'
              }
            ]
            options: ['answer', 'width', 'name', 'cmp_options']
            to: '231'
            token: '[_]'
            type: 'answer'
          ]
          [ # 3
            combine: { text: 'type' }
            from: '231'
            to: '232'
            type: 'text'
            stack: ['\n']
          ]
        ]
      ]
    ]
  ]
]
